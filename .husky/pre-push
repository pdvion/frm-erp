#!/usr/bin/env sh

echo "ğŸ” Executando validaÃ§Ãµes prÃ©-push..."

# 1. Verificar se Prisma Client estÃ¡ atualizado
echo "ğŸ“¦ Verificando Prisma Client..."
pnpm prisma generate

# 2. Type check obrigatÃ³rio
echo "ğŸ” Verificando tipos TypeScript..."
pnpm type-check
if [ $? -ne 0 ]; then
  echo "âŒ Erros de tipo encontrados. Corrija antes de fazer push."
  exit 1
fi

# 3. Lint
echo "ğŸ§¹ Verificando lint..."
pnpm lint
if [ $? -ne 0 ]; then
  echo "âŒ Erros de lint encontrados. Corrija antes de fazer push."
  exit 1
fi

# 4. Testes unitÃ¡rios (rÃ¡pidos)
echo "ğŸ§ª Executando testes unitÃ¡rios..."
pnpm test:run
if [ $? -ne 0 ]; then
  echo "âŒ Testes falharam. Corrija antes de fazer push."
  exit 1
fi

echo "âœ… Todas as validaÃ§Ãµes passaram!"
